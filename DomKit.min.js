/**
 * DomKit - A minimalist front-end renderer with component support
 * Version: v1.0.0
 */
const DomKit=function(){let e=(e,t={},r=[])=>({tag:e,props:t,children:r}),t=(e,t)=>{if(typeof e!=typeof t)return!0;if("string"==typeof e||"number"==typeof e)return e!==t;if(e.tag!==t.tag)return!0;let r=Object.keys(e.props||{}),n=Object.keys(t.props||{});if(r.length!==n.length)return!0;for(let i of r)if(!i.startsWith("on")){if("style"===i&&"object"==typeof e.props[i]&&"object"==typeof t.props[i]){let o=Object.keys(e.props[i]),s=Object.keys(t.props[i]);if(o.length!==s.length)return!0;for(let p of o)if(e.props[i][p]!==t.props[i][p])return!0}else if(e.props[i]!==t.props[i])return!0}return!1},r=(e,t,r)=>{Object.keys(r).forEach(n=>{if(n.startsWith("on")&&(!t[n]||r[n]!==t[n])){let i=n.substring(2).toLowerCase();e._events&&e._events[i]&&(e.removeEventListener(i,e._events[i]),delete e._events[i])}}),Object.keys(t).forEach(n=>{if(n.startsWith("on")||r[n]!==t[n]){if(n.startsWith("on")){let i=n.substring(2).toLowerCase();e._events||(e._events={}),e._events[i]&&e.removeEventListener(i,e._events[i]),e._events[i]=t[n],e.addEventListener(i,t[n])}else if("style"===n&&"object"==typeof t[n]){let o=t[n],s=r[n]||{};Object.keys(s).forEach(t=>{o[t]||(e.style[t]="")}),Object.keys(o).forEach(t=>{s[t]!==o[t]&&(e.style[t]=o[t])})}else"className"===n?e.setAttribute("class",t[n]):e.setAttribute(n,t[n])}}),Object.keys(r).forEach(r=>{t[r]||r.startsWith("on")||"style"===r||e.removeAttribute(r)})},n=(e,o,s,p=0)=>{if(!s){e.appendChild(i(o));return}if(!o){e.removeChild(e.childNodes[p]);return}if(t(o,s)){e.replaceChild(i(o),e.childNodes[p]);return}if("string"==typeof o||"number"==typeof o)return;r(e.childNodes[p],o.props||{},s.props||{});let l=o.children?o.children.length:0,f=s.children?s.children.length:0;for(let d=0;d<Math.max(l,f);d++)n(e.childNodes[p],o.children&&d<l?o.children[d]:null,s.children&&d<f?s.children[d]:null,d)},i=e=>{if("string"==typeof e||"number"==typeof e)return document.createTextNode(e);if("function"==typeof e.tag){let t=e.tag(e.props||{});return i(t)}let n=document.createElement(e.tag);return e.props&&r(n,e.props,{}),(e.children||[]).forEach(e=>{n.appendChild(i(e))}),n},o=(e,t)=>{if("string"==typeof t&&(t=document.querySelector(t)),t._vdom)n(t,e,t._vdom,0),t._vdom=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(i(e)),t._vdom=e}},s=e=>t=>e(t),p=(t,r,n="replace")=>{"string"==typeof r&&(r=document.querySelector(r));let o="function"==typeof t?e(t):t,s=i(o);switch(r._injected||(r._injected=[]),n){case"append":r.appendChild(s),r._injected.push(o);break;case"prepend":r.insertBefore(s,r.firstChild),r._injected.unshift(o);break;default:for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(s),r._injected=[o]}return s},l=(t,r,n=0)=>{"string"==typeof r&&(r=document.querySelector(r));let o="function"==typeof t?e(t):t;if(!r._injected||!r._injected[n])return p(o,r,"append");r._injected[n];let s=r.children[n];if(!s)return p(o,r,"append");let l=document.createElement("div"),f=i(o);return l.appendChild(f),r.replaceChild(f,s),r._injected[n]=o,f};return{h:e,render:o,createComponent:s,mount(t,r){o(e(t),r)},inject:(t,r,n)=>p("function"==typeof t?e(t):t,r,n),updateInjected:(t,r,n)=>l("function"==typeof t?e(t):t,r,n),append:(t,r)=>p("function"==typeof t?e(t):t,r,"append"),prepend:(t,r)=>p("function"==typeof t?e(t):t,r,"prepend")}}();